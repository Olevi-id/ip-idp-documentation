<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="667px" preserveAspectRatio="none" style="width:498px;height:667px;background:#FFFFFF;" version="1.1" viewBox="0 0 498 667" width="498px" zoomAndPan="magnify"><defs/><g><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="23" x2="23" y1="81.4883" y2="586.0781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="138.5" x2="138.5" y1="81.4883" y2="586.0781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="296" x2="296" y1="81.4883" y2="586.0781"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="469" x2="469" y1="81.4883" y2="586.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="78.5352">User</text><ellipse cx="23.5" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,21.5 L23.5,48.5 M10.5,29.5 L36.5,29.5 M23.5,48.5 L10.5,63.5 M23.5,48.5 L36.5,63.5 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="5" y="598.6133">User</text><ellipse cx="23.5" cy="610.0664" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M23.5,618.0664 L23.5,645.0664 M10.5,626.0664 L36.5,626.0664 M23.5,645.0664 L10.5,660.0664 M23.5,645.0664 L36.5,660.0664 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62" x="107.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="114.5" y="70.5352">Service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="62" x="107.5" y="585.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="114.5" y="605.6133">Service</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="35" x="279" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="286" y="70.5352">IdP</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="35" x="279" y="585.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="21" x="286" y="605.6133">IdP</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="447" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="454" y="70.5352">CRM</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="45" x="447" y="585.0781"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="454" y="605.6133">CRM</text><polygon fill="#181818" points="126.5,108.7988,136.5,112.7988,126.5,116.7988,130.5,112.7988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="132.5" y1="112.7988" y2="112.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="30.5" y="108.0566">Trigger auth</text><polygon fill="#181818" points="34.5,138.1094,24.5,142.1094,34.5,146.1094,30.5,142.1094" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="28.5" x2="137.5" y1="142.1094" y2="142.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="40.5" y="137.3672">Auth Request</text><polygon fill="#181818" points="284.5,182.7305,294.5,186.7305,284.5,190.7305,288.5,186.7305" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="290.5" y1="186.7305" y2="186.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="30.5" y="166.6777">Auth Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="30.5" y="181.9883">(redirected)</text><polygon fill="#181818" points="34.5,212.041,24.5,216.041,34.5,220.041,30.5,216.041" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="28.5" x2="295.5" y1="216.041" y2="216.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="40.5" y="211.2988">Authenticate</text><polygon fill="#181818" points="284.5,241.3516,294.5,245.3516,284.5,249.3516,288.5,245.3516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="290.5" y1="245.3516" y2="245.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="80" x="30.5" y="240.6094">Authenticate</text><polygon fill="#181818" points="457.5,285.9727,467.5,289.9727,457.5,293.9727,461.5,289.9727" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="296.5" x2="463.5" y1="289.9727" y2="289.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="303.5" y="269.9199">Resolve extra attributes</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="303.5" y="285.2305">(backchannel)</text><polygon fill="#181818" points="149.5,330.5938,139.5,334.5938,149.5,338.5938,145.5,334.5938" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="143.5" x2="295.5" y1="334.5938" y2="334.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134" x="155.5" y="314.541">Provision user profile</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="155.5" y="329.8516">(backchannel)</text><polygon fill="#181818" points="34.5,359.9043,24.5,363.9043,34.5,367.9043,30.5,363.9043" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="28.5" x2="295.5" y1="363.9043" y2="363.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="40.5" y="359.1621">Auth response</text><polygon fill="#181818" points="126.5,404.5254,136.5,408.5254,126.5,412.5254,130.5,408.5254" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="132.5" y1="408.5254" y2="408.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="30.5" y="388.4727">Auth response</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="71" x="30.5" y="403.7832">(redirected)</text><polygon fill="#181818" points="284.5,433.8359,294.5,437.8359,284.5,441.8359,288.5,437.8359" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="138.5" x2="290.5" y1="437.8359" y2="437.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="145.5" y="433.0938">Fetch id_token</text><polygon fill="#181818" points="149.5,463.1465,139.5,467.1465,149.5,471.1465,145.5,467.1465" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="143.5" x2="295.5" y1="467.1465" y2="467.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="155.5" y="462.4043">id_token response</text><line style="stroke:#181818;stroke-width:1.0;" x1="138.5" x2="180.5" y1="496.457" y2="496.457"/><line style="stroke:#181818;stroke-width:1.0;" x1="180.5" x2="180.5" y1="496.457" y2="509.457"/><line style="stroke:#181818;stroke-width:1.0;" x1="139.5" x2="180.5" y1="509.457" y2="509.457"/><polygon fill="#181818" points="149.5,505.457,139.5,509.457,149.5,513.457,145.5,509.457" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="145.5" y="491.7148">connect to profile</text><polygon fill="#181818" points="34.5,534.7676,24.5,538.7676,34.5,542.7676,30.5,538.7676" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="28.5" x2="137.5" y1="538.7676" y2="538.7676"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88" x="40.5" y="534.0254">Authenticated</text><polygon fill="#181818" points="126.5,564.0781,136.5,568.0781,126.5,572.0781,130.5,568.0781" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="23.5" x2="132.5" y1="568.0781" y2="568.0781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="30.5" y="563.3359">Authorisated</text><!--MD5=[f17f772f734c91437a4dbd51b958e1e9]
@startuml useCase-jitProvisioning

actor User

User -> Service: Trigger auth
Service -> User: Auth Request
User -> IdP: Auth Request\n(redirected)
IdP -> User: Authenticate
User -> IdP: Authenticate
IdP -> CRM: Resolve extra attributes\n(backchannel)
IdP -> Service: Provision user profile\n(backchannel)
IdP -> User: Auth response
User -> Service: Auth response\n(redirected)
Service -> IdP: Fetch id_token
IdP -> Service: id_token response
Service -> Service: connect to profile
Service -> User: Authenticated
User -> Service: Authorisated
@end

PlantUML version 1.2022.7(Mon Aug 22 20:01:30 EEST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: FI
--></g></svg>